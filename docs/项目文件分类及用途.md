# 项目文件分类及用途

本文档对项目中的主要文件按功能类别进行分类，并说明它们的具体用途。

## 一、项目整体结构

```
suna-deepseek/
├── frontend/           # 前端 React/Next.js 应用
├── backend/            # 后端 Python/FastAPI 应用
├── installer-wizard/   # 安装向导
├── docs/               # 文档目录
├── designs/            # 设计文档
├── docker-compose.yml  # Docker 编排配置
├── .env                # 环境变量配置
└── README.md           # 项目说明文档
```

## 二、前端文件分类

### 2.1 核心配置文件

| 文件名 | 路径 | 用途 |
|-------|------|------|
| package.json | frontend/package.json | 前端项目依赖配置，包含构建脚本和项目信息 |
| next.config.ts | frontend/next.config.ts | Next.js 框架配置 |
| tsconfig.json | frontend/tsconfig.json | TypeScript 编译配置 |
| webpack.config.js | frontend/webpack.config.js | Webpack 打包配置 |
| eslint.config.mjs | frontend/eslint.config.mjs | ESLint 代码质量检查配置 |
| components.json | frontend/components.json | UI 组件库配置 |
| electron版本构建指南.md | frontend/electron版本构建指南.md | Electron 构建说明文档 |

### 2.2 Electron 相关文件

| 文件名 | 路径 | 用途 |
|-------|------|------|
| build-electron.js | frontend/scripts/build-electron.js | Electron 构建脚本 |
| prepare-export.js | frontend/scripts/prepare-export.js | 导出准备脚本 |
| main.js | frontend/electron/main.js | Electron 主进程脚本 |
| preload.js | frontend/electron/preload.js | Electron 预加载脚本 |
| server.js | frontend/electron/server.js | Electron 内嵌服务器脚本 |
| tsconfig.electron.json | frontend/tsconfig.electron.json | Electron TypeScript 配置 |

### 2.3 源代码文件 (src/)

#### 2.3.1 应用入口和页面

| 文件名 | 路径 | 用途 |
|-------|------|------|
| app/ | frontend/src/app/ | Next.js 应用路由和页面 |
| client/main.tsx | frontend/src/client/main.tsx | 客户端入口文件 |
| middleware.ts | frontend/src/middleware.ts | 中间件配置 |

#### 2.3.2 组件文件 (components/)

| 目录/文件名 | 路径 | 用途 |
|------------|------|------|
| components/thread/ | frontend/src/components/thread/ | 线程相关组件 |
| components/ui/ | frontend/src/components/ui/ | UI 组件库 |
| components/sidebar/ | frontend/src/components/sidebar/ | 侧边栏组件 |
| components/file-renderers/ | frontend/src/components/file-renderers/ | 文件渲染器组件 |

#### 2.3.3 钩子函数 (hooks/)

| 目录/文件名 | 路径 | 用途 |
|------------|------|------|
| hooks/react-query/ | frontend/src/hooks/react-query/ | React Query 数据查询钩子 |
| hooks/use-query.ts | frontend/src/hooks/use-query.ts | 自定义查询钩子 |

#### 2.3.4 工具和库文件 (lib/)

| 目录/文件名 | 路径 | 用途 |
|------------|------|------|
| lib/api/ | frontend/src/lib/api/ | API 调用工具 |
| lib/utils/ | frontend/src/lib/utils/ | 通用工具函数 |
| lib/versioning/ | frontend/src/lib/versioning/ | 版本控制相关工具 |

#### 2.3.5 上下文和提供者 (contexts/ & providers/)

| 目录/文件名 | 路径 | 用途 |
|------------|------|------|
| contexts/ | frontend/src/contexts/ | React 上下文 |
| providers/ | frontend/src/providers/ | React 提供者组件 |

### 2.4 静态资源 (public/)

| 目录/文件名 | 路径 | 用途 |
|------------|------|------|
| public/ | frontend/public/ | 静态资源文件 |
| public/icon.* | frontend/public/icon.* | 应用图标文件 |
| public/kortix-*.svg | frontend/public/kortix-*.svg | Kortix 品牌图标 |

## 三、后端文件分类

### 3.1 核心配置文件

| 文件名 | 路径 | 用途 |
|-------|------|------|
| pyproject.toml | backend/pyproject.toml | Python 项目配置和依赖 |
| .env.example | backend/.env.example | 环境变量示例配置 |
| Dockerfile | backend/Dockerfile | Docker 构建配置 |
| docker-compose.yml | backend/docker-compose.yml | Docker 编排配置 |

### 3.2 主要功能模块

#### 3.2.1 Agent 模块

| 目录/文件名 | 路径 | 用途 |
|------------|------|------|
| agent/ | backend/agent/ | AI 代理核心功能 |
| agent/api.py | backend/agent/api.py | Agent API 接口 |
| agent/prompt.py | backend/agent/prompt.py | Agent 提示词配置 |
| agent/tools/ | backend/agent/tools/ | Agent 工具集 |
| agent/versioning/ | backend/agent/versioning/ | Agent 版本控制 |

#### 3.2.2 API 模块

| 文件名 | 路径 | 用途 |
|-------|------|------|
| api.py | backend/api.py | 主 API 入口 |
| admin/api.py | backend/admin/api.py | 管理 API |
| composio_integration/api.py | backend/composio_integration/api.py | Composio 集成 API |
| credentials/api.py | backend/credentials/api.py | 凭证管理 API |
| knowledge_base/api.py | backend/knowledge_base/api.py | 知识库 API |
| triggers/api.py | backend/triggers/api.py | 触发器 API |

#### 3.2.3 服务模块

| 目录/文件名 | 路径 | 用途 |
|------------|------|------|
| services/ | backend/services/ | 核心服务集合 |
| services/llm.py | backend/services/llm.py | LLM 服务集成 |
| services/supabase.py | backend/services/supabase.py | Supabase 数据库服务 |
| services/docker/ | backend/services/docker/ | Docker 服务集成 |

#### 3.2.4 沙箱模块

| 目录/文件名 | 路径 | 用途 |
|------------|------|------|
| sandbox/ | backend/sandbox/ | 沙箱环境实现 |
| sandbox/docker_sandbox.py | backend/sandbox/docker_sandbox.py | Docker 沙箱实现 |
| sandbox/scripts/ | backend/sandbox/scripts/ | 沙箱启动脚本 |

#### 3.2.5 凭证管理模块

| 目录/文件名 | 路径 | 用途 |
|------------|------|------|
| credentials/ | backend/credentials/ | 凭证管理功能 |
| credentials/credential_service.py | backend/credentials/credential_service.py | 凭证服务 |

#### 3.2.6 触发器模块

| 目录/文件名 | 路径 | 用途 |
|------------|------|------|
| triggers/ | backend/triggers/ | 事件触发器功能 |
| triggers/trigger_service.py | backend/triggers/trigger_service.py | 触发器服务 |

#### 3.2.7 知识库模块

| 目录/文件名 | 路径 | 用途 |
|------------|------|------|
| knowledge_base/ | backend/knowledge_base/ | 知识库功能 |
| knowledge_base/file_processor.py | backend/knowledge_base/file_processor.py | 文件处理器 |

### 3.3 工具和辅助模块

| 目录/文件名 | 路径 | 用途 |
|------------|------|------|
| utils/ | backend/utils/ | 工具函数集合 |
| utils/auth_utils.py | backend/utils/auth_utils.py | 认证工具 |
| utils/logger.py | backend/utils/logger.py | 日志工具 |
| utils/files_utils.py | backend/utils/files_utils.py | 文件处理工具 |

### 3.4 数据库和迁移

| 目录/文件名 | 路径 | 用途 |
|------------|------|------|
| supabase/ | backend/supabase/ | Supabase 配置和迁移 |
| supabase/migrations/ | backend/supabase/migrations/ | 数据库迁移文件 |

## 四、部署和配置文件

| 文件名 | 路径 | 用途 |
|-------|------|------|
| .dockerignore | 多个目录 | Docker 忽略文件配置 |
| .gitignore | 多个目录 | Git 忽略文件配置 |
| docker-compose.yaml | 根目录 | 主 Docker 编排配置 |
| docker-compose-supabase-minimal.yml | 根目录 | 简化版 Supabase Docker 配置 |
| docker-compose-supabase-official.yml | 根目录 | 官方版 Supabase Docker 配置 |
| kong.yml | 根目录 | Kong API 网关配置 |

## 五、其他重要文件

| 文件名 | 路径 | 用途 |
|-------|------|------|
| README.md | 多个目录 | 项目说明文档 |
| README_CN.md | 根目录 | 中文项目说明文档 |
| CONTRIBUTING.md | 根目录 | 贡献指南 |
| LICENSE | 根目录 | 许可证文件 |
| Change.md | 根目录 | 变更日志 |
| CLAUDE.md | 根目录 | Claude 相关文档 |
| designs/ | 根目录 | 设计文档集合 |
| installer-wizard/ | 根目录 | 安装向导应用 |

## 六、功能模块-文件映射表

### 6.1 核心功能

| 功能 | 相关文件 |
|-----|---------|
| AI 代理 | backend/agent/* |
| API 服务 | backend/api.py, backend/agent/api.py 等 |
| 前端界面 | frontend/src/app/*, frontend/src/components/* |
| Electron 应用 | frontend/electron/*, frontend/scripts/build-electron.js |

### 6.2 辅助功能

| 功能 | 相关文件 |
|-----|---------|
| 凭证管理 | backend/credentials/* |
| 沙箱环境 | backend/sandbox/* |
| 知识库 | backend/knowledge_base/* |
| 触发器 | backend/triggers/* |
| Composio 集成 | backend/composio_integration/* |

### 6.3 工具和配置

| 功能 | 相关文件 |
|-----|---------|
| 工具函数 | backend/utils/*, frontend/src/lib/utils/* |
| 数据查询 | frontend/src/hooks/react-query/* |
| 配置管理 | 各目录下的 .env.example, pyproject.toml, package.json 等 |
| 部署配置 | 各目录下的 Dockerfile, docker-compose*.yml 等 |